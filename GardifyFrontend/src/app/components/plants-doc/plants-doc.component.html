<div class="overlay-loading" [hidden]="!loading">
    <div class="app-loading center-screen">
        <svg class="spinner" viewBox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="24" fill="none" stroke-width="2" stroke-miterlimit="10"/>
        </svg>
    </div>
</div>
<div class="plantHeader wrapper {{mode}} pt-5 ">
    <div class="container px-5 pb-5">
        <app-ad [ad]="ad" ></app-ad>

        <div class="row pt-4 pb-3  {{mode}}">
            <div class="col-lg-12 bt-border">
            <h2 *ngIf="!showUserPosts" class="t-26 mt-3 t-light {{mode === 'light'? 'text-grey' : 'text-white'}}">PFLANZEN-DOC</h2>
            <h2 routerLink="/pflanzendoc" *ngIf="showUserPosts"  class="ptr t-26 mt-3 t-light {{mode === 'light'? 'text-grey4' : 'text-white'}}"><< PFLANZEN-DOC </h2>
            <h2  *ngIf="showUserPosts"  class="ptr t-20 mt-3 t-light {{mode === 'light'? 'text-grey4' : 'text-white'}}">Meine Posts </h2>

        </div>
            <div  *ngIf="!showUserPosts" class="col-12 col-md-6 bt-border mt-3 ">
                <button class="btn btn_border075 btn-green mb-3 text-center {{mode === 'light'? 'text-white' : 'text-white'}}" [routerLink]="['/neuesthema']">Neue Frage stellen</button>
            </div>
            <div  *ngIf="!showUserPosts" class="col-12 col-md-6 bt-border mt-3 ">
                <button class="btn btn_border075 btn-green mb-3 text-center {{mode === 'light'? 'text-white' : 'text-white'}}" [routerLink]="['/pflanzendoc/my-posts']">Meine Posts</button>
            </div>
        </div>
        <div *ngIf="!showUserPosts">
            <ng-container *ngIf="posts">
                <div *ngFor="let post of posts; let i = index" class="bt-border"  >
                    <div class="row mb-3 {{mode === 'light'? 'text-darkgrey' : 'text-white'}}">
                        <div *ngIf="isAdminImg(post.Images[0]?.FullDescription)" class="col-12 col-lg-3  mt-2 mb-2 ">
                            <img  [src]="toUrl(post.Images[0]?.SrcAttr,true)" style="height: 220px;
                            width: 100%;object-fit: cover;"  [routerLink]="['/thread',{ id:post.QuestionId }]" class="ptr">
                        </div>
                        <div *ngIf="!isAdminImg(post.Images[0]?.FullDescription)" class="col-12 col-lg-3  mt-2 mb-2 ">
                            <img  [src]="toUrl(post.Images[0]?.SrcAttr,false)" style="height: 220px;
                            width: 100%;object-fit: cover;"  [routerLink]="['/thread',{ id:post.QuestionId }]" class="ptr">
                        </div>
                        <div class=" col-lg-9  mt-2">
                            <span class="t-14 t-light d-inline-block ">{{post.PublishDate | date:'dd.MM.yyy'}}</span> <span class="t-14 t-light d-inline-block ptr {{mode === 'light'? 'text-darkgrey' : 'text-ltgrey '}}" [routerLink]="['/thread',{ id:post.QuestionId }]" style="float: right;">{{post.TotalAnswers}} Antwort{{post.TotalAnswers !== 1 ? 'en':''}}</span>
                            
                            <h2 *ngIf="post.Thema" class="t-italic t-reg t-14">{{post.Thema}}</h2>
                        
                            <p *ngIf="post.QuestionText" class="{{mode === 'light'? 'text-blackish' : 'text-white'}} t-14 t-reg">
                                {{post.QuestionText | slice:0:100}} <span [routerLink]="['/thread',{ id:post.QuestionId }]" class="t-14 text-green ptr">...mehr</span>
                            </p>
                            <span *ngIf="post.isEdited" class=" t-light t-14 {{mode === 'light'? 'text-darkgrey' : 'text-ltgrey '}}">(bearbeitet)</span>

                        </div>
                    </div>
                    <ng-container *ngIf="((i+1) % 5) == 0 " >
                          <app-ad [ad]="ad" ></app-ad>
                      </ng-container>
                </div>
            </ng-container>
            <ng-container *ngIf="!posts">
                <div class="row">
                    <div class="col-lg-12">
                        <h2 class="{{mode === 'light'? 'text-blackish' : 'text-white'}} t-14 t-reg">
                            Noch Keine Posts!
                        </h2>
                    </div>
                </div>
            </ng-container>
        </div>
        <!--My-post-->
        <router-outlet></router-outlet>
        <app-ad [ad]="ad" ></app-ad>

    </div>
    
</div>

<!-- New Post Modal -->
<div class="modal fade" id="newPostModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content {{mode}}">
      <div class="modal-header">
          <h5 class="modal-title">Neuen Post Erstellen</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span class="{{mode==='dark'?'text-ltgrey':'text-blackish'}}" aria-hidden="true">&times;</span>
          </button>
      </div>
      <form class="modal-body" id="newPostForm" [formGroup]="newPostForm" (ngSubmit)="addNewPost()" validate>
          <div class="form-group">
              <label>Frage</label>
              <input formControlName="title" type="text" class="form-control" placeholder="Frage eingeben">
          </div>
          <div class="form-group mb-2">
              <label>Referenztyp</label>
              <select formControlName="referenceType" class="custom-select">
                  <option value="1">Pflanze</option>
                  <option value="2">Garten</option>
              </select>
          </div>
          <div class="form-group mb-2">
              <label>Zugehörig</label>
              <select formControlName="related" class="custom-select">
              </select>
          </div>
          <div class="form-check-inline mb-2">
              <label class="form-check-label">Veröffentlichung erlauben?</label>
              <input class="form-check-input mx-2" type="checkbox" formControlName="allowPub">
          </div>
          <hr>
      </form>
      <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Abbrechen</button>
          <button type="submit" class="btn btn-green" form="newPostForm" [disabled]="newPostForm.invalid">Erstellen</button>
      </div>
      </div>
  </div>
</div>
<div class="modal fade" id="sendOk" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content {{mode}}">
        <div class="modal-header pb-0">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span class="{{mode==='dark'?'text-ltgrey':'text-blackish'}}" aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body pb-1 pt-0">
          <div class="row">
            <div class="col-12 mt-2 {{mode === 'light'? 'text-blackish' : 'text-white'}}">
              <p>
                Vielen Dank für deine Frage. In Kürze erhälst du eine Antwort. 
                
              </p>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  </div>
  <button id="openModal" #openModal [hidden]="true" 
 data-toggle="modal" data-target="#sendOk"></button>
