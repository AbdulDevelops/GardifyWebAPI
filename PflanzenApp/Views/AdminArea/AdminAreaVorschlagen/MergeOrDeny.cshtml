@using PflanzenApp.Controllers.AdminArea
@model GardifyModels.Models.AdminAreaViewModels.PlantViewModel

@{
    ViewBag.Title = "MergeOrDeny";
    Layout = "~/Views/Shared/_LayoutAdminArea.cshtml";
}
@using GardifyModels.Models


@if (Model.StatusMessage != null)
{
    Html.RenderPartial("_modalStatusMessage", Model.StatusMessage);
}


<h2>Merge Or Deny</h2>
<div class="form-horizontal">

    @using (Html.BeginForm("MergeSuggestion", "AdminAreaVorschlagen", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.Plant.Id)

        <div class="form-group">
            <label class="control-label col-md-2">Datenbank ID</label>
            <div class="col-md-10">
                <input class="form-control" value="@Model.Plant.Id" disabled />
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">Botanischer Name</label>
            <div class="col-md-10">
                <input class="form-control" value="@Model.Plant.NameLatin" disabled />
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Deutscher Name</label>
            <div class="col-md-10">
                <input class="form-control" value="@Model.Plant.NameGerman" disabled />
            </div>
        </div>

        <div>
            <div class="form-group">
                <label class="control-label col-md-2">Text</label>
                <div class="col-md-10">

                    @Html.TextAreaFor(model => model.EmailText, 10, 80, new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.EmailText, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Merge" class="btn btn-default" />
                </div>
            </div>
        </div>
    }
    
    @using (Html.BeginForm("DenySuggestion", "AdminAreaVorschlagen", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.Plant.Id)
        <div>
            <div class="form-group">
                <label class="control-label col-md-2">Text</label>
                <div class="col-md-10">
                    @Html.TextAreaFor(model => model.EmailText, 10, 80, new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.EmailText, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Deny" class="btn btn-default" />
                </div>
            </div>
        </div>
    }


</div>

    <div>
        @Html.ActionLink("zurück", "Index")
    </div>


    @section Scripts {
        <script type="text/javascript">
            /* German initialisation for the jQuery UI date picker plugin. */
            jQuery(function (el) {
                el.datepicker.regional['de'] = {
                    closeText: 'schließen',
                    prevText: '&#x3c;zurück',
                    nextText: 'Vor&#x3e;',
                    currentText: 'heute',
                    monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni',
                        'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
                    monthNamesShort: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun',
                        'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
                    dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
                    dayNamesShort: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
                    dayNamesMin: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
                    weekHeader: 'Wo',
                    dateFormat: 'dd.mm.yy',
                    firstDay: 1,
                    isRTL: false,
                    showMonthAfterYear: false,
                    yearSuffix: ''
                };
                $.datepicker.setDefaults($.datepicker.regional['de']);
            });
            $(function () { // will trigger when the document is ready
                $(".datepicker").datepicker($.datepicker.regional["de"]);
            });
            $(document).ready(function () {
                $('#Title').attr("value", "");
            });
            $('#Plant_Description').bind('input propertychange', function () {
                console.log(this.value.length);
                if (this.value.length > 4000) {
                    $("#Plant_Description").val($("#Plant_Description").val().substring(0, 4000));
                    alert("Beschreibungslimit erreicht");
                }
            });
        </script>

    }