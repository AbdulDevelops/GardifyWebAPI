@model GardifyModels.Models.IndexViewModel
@{
    ViewBag.Title = "Accountverwaltung";
}

<h2>@ViewBag.Title.</h2>

<p class="text-success">@ViewBag.StatusMessage</p>
@if (!string.IsNullOrEmpty(Model.SuccessMessage))
{
    <div class="alert alert-success">
        @Model.SuccessMessage
    </div>
}
@if (!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <div class="alert alert-danger">
        @Model.ErrorMessage
    </div>
}
<div>
    <h4>Kontoeinstellungen ändern</h4>
    <hr />
    <dl class="dl-horizontal">
        @if (Model.AddressSet)
        {
            <dt>Meine Adresse</dt>
            <dd>
                <dl class="dl-horizontal">
                    <dt>
                        Land
                    </dt>
                    <dd>
                        @Model.Country
                    </dd>
                    <dt>
                        Stadt
                    </dt>
                    <dd>
                        @Model.City
                    </dd>
                    <dt>
                        PLZ
                    </dt>
                    <dd>
                        @Model.Zip
                    </dd>
                    <dt>
                        Straße
                    </dt>
                    <dd>
                        @Model.Street
                    </dd>
                    <dt>
                        @Html.ActionLink("Adressinformationen Bearbeiten", "Edit", "Property", new { id = Model.PropertyId }, null)
                    </dt>
                </dl>
            </dd>
        }
        <dd>
            <br />
        </dd>
        <dd class="alert alert-info">
            <b>Tipp:</b> Jeder Schlüssel kann nur 1x verwendet werden. Wenn Sie den selben Schlüssel an 2 Leute schicken, kann ihn nur einer benutzen!
        </dd>
        <dt>Beta-Schlüssel:</dt>
        <dd>
            <div class="row">
                @foreach (var key in Model.BetaKeys)
                {
                    using (Html.BeginForm("SendMail", "Manage", FormMethod.Post, new { @key = key.Key }))
                    {
                        <div class="col-md-2">
                            @Html.Hidden("key",key.Key)
                            @Html.Label(key.Key)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBox("email","", new { placeholder = "Email" })
                        </div>
                        <div class="col-md-3 col-md-offset-4">
                            <input type="submit" value="Versenden" class="btn btn-default" />
                        </div>
                    }
                    <br />
                }
            </div>
        </dd>
        <dt>Kennwort:</dt>
        <dd>
            [
            @if (Model.HasPassword)
            {
                @Html.ActionLink("Kennwort ändern", "ChangePassword")
            }
            else
            {
                @Html.ActionLink("Erstellen", "SetPassword")
            }
            ]
        </dd>
        <dt>Externe Anmeldungen:</dt>
        <dd>
            @Model.Logins.Count [
            @Html.ActionLink("Verwalten", "ManageLogins") ]
        </dd>
        @*
            Telefonnummern können als zweite Stufe in einem zweistufigen Authentifizierungssystem verwendet werden.

             In <a href="http://go.microsoft.com/fwlink/?LinkId=403804">diesem Artikel</a>
                finden Sie Details zum Einrichten dieser ASP.NET-Anwendung für die Unterstützung zweistufiger Authentifizierung mithilfe von SMS.

             Entfernen Sie den Kommentar für den folgenden Block, nachdem Sie zweistufige Authentifizierung eingerichtet haben.
        *@
        @*
            <dt>Telefonnummer:</dt>
            <dd>
                @(Model.PhoneNumber ?? "None") [
                @if (Model.PhoneNumber != null)
                {
                    @Html.ActionLink("Ändern", "AddPhoneNumber")
                    @: &nbsp;|&nbsp;
                    @Html.ActionLink("Entfernen", "RemovePhoneNumber")
                }
                else
                {
                    @Html.ActionLink("Hinzufügen", "AddPhoneNumber")
                }
                ]
            </dd>
        *@
        @*<dt>Zweistufige Authentifizierung:</dt>
            <dd>
                <p>
                    Es sind keine Anbieter für zweistufige Authentifizierung konfiguriert. In <a href="http://go.microsoft.com/fwlink/?LinkId=403804">diesem Artikel</a>
                    finden Sie Details zum Einrichten dieser ASP.NET-Anwendung für die Unterstützung  zweistufiger Authentifizierung.
                </p>
                @if (Model.TwoFactor)
                    {
                        using (Html.BeginForm("DisableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <text>Aktiviert
                            <input type="submit" value="Deaktivieren" class="btn btn-link" />
                            </text>
                        }
                    }
                    else
                    {
                        using (Html.BeginForm("EnableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {
                            @Html.AntiForgeryToken()
                            <text>Deaktiviert
                            <input type="submit" value="Aktivieren" class="btn btn-link" />
                            </text>
                        }
                    }
            </dd>*@
    </dl>
</div>
